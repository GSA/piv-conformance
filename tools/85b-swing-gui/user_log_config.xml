<?xml version="1.0" encoding="UTF-8"?>
<configuration>

	<!-- <timestamp key="timestamp" datePattern="yyyyMMdd'-'HHmmss.SSS"/> -->
    <!-- this is a file appender that the root logger will post events to. Setting the level on the root logger
            will moderate verbosity. Individual facilities can be turned off as shown below. -->
 
    <appender name="DEBUG" class="gov.gsa.pivconformancegui.TimeStampedFileAppender">
        <file>logs/debug/debug.log</file>
        <encoder>
            <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
        </encoder>
    </appender>

    <!-- this log is used by conformance tests/atoms in progress. it can be omitted if there's no need to crack this stream out into a separate file. -->
 
    <appender name="TESTLOG" class="gov.gsa.pivconformancegui.TimeStampedFileAppender">
        <file>logs/testlog/test_progress.log</file>
        <encoder>
            <pattern>%date{yyyy-MM-dd HH:mm:ss},%level,"%msg"%n</pattern>
        </encoder>
    </appender>
  
    <!-- This is the appender that produces the conformance results CSV.
        In order to get test reports, it **MUST** be called CONFORMANCELOG -->
 
    <appender name="CONFORMANCELOG" class="gov.gsa.pivconformancegui.TimeStampedFileAppender">
        <file>logs/conformancelog/conformance_results.csv</file>

        <!-- the application will search out this appender by name and manually rotate it at the beginning of each conformance run.
                this triggering policy is necessary to allow logback to append to a log without knowing how to rotate it. -->

        <triggeringPolicy class="gov.gsa.pivconformancegui.ManualTriggeringPolicy" />
        <encoder>
            <pattern>%date{yyyy-MM-dd HH:mm:ss},%msg%n</pattern>
        </encoder>
    </appender>

    <!-- This is the appender that produces the APDU traces.
         In order to get traces, it **MUST** be called APDULOG -->

    <appender name="APDULOG" class="gov.gsa.pivconformancegui.TimeStampedFileAppender">
        <file>logs/apdu/apdu_transmission.log</file>

        <!-- the application will search out this appender by name and manually rotate it at the beginning of each conformance run.
                this triggering policy is necessary to allow logback to append to a log without knowing how to rotate it. -->

        <triggeringPolicy class="gov.gsa.pivconformancegui.ManualTriggeringPolicy" />
        <encoder>
            <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
        </encoder>
    </appender>

    <!-- this is fully optional and probably only desirable during development -->
    <appender name="STDOUT" class="gov.gsa.pivconformancegui.TimeStampedFileAppender">
        <file>logs/file/console.log</file> 
        <encoder>
            <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
        </encoder>
    </appender>

    <root level="DEBUG" >
		<appender-ref ref="STDOUT" />
    </root>

    <logger level="DEBUG" name="gov.gsa">
        <appender-ref ref="DEBUG" />
    </logger>
    
    <!-- These are especially noisy log facilities and therefore a good example of how to quash 
         log output that isn't wanted while allowing other messages to go through the logging apparatus
    -->
   
	<logger level="OFF" name="gov.gsa.pivconformance.card.client.X509CertificateDataObject.TLVParser"/>
	<logger level="OFF" name="gov.gsa.conformancelib.configuration.TestStepModel"/>

    <!-- split test progress to its own appender -->
    <logger name="gov.gsa.conformancelib.testProgress">
        <appender-ref ref="TESTLOG" />
    </logger>

    <!-- split test results into a CSV -->
    <logger name="gov.gsa.conformancelib.testResults">
        <appender-ref ref="CONFORMANCELOG" />
    </logger>

    <!-- APDUs into a separate log -->
    <logger level="DEBUG" name="gov.gsa.pivconformance.apdu">
        <appender-ref ref="APDULOG" />
    </logger>
 


</configuration>
